<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Configuración</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Configuración</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Reglas de abono</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-label position="stacked">Abono por defecto</ion-label>
          <ion-input
            type="number"
            step="0.01"
            inputmode="decimal"
            [(ngModel)]="form.defaultCreditAmount"
            (ionBlur)="saveSettings()"
          ></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Días de abono (ej. 15,30)</ion-label>
          <ion-input
            type="text"
            [(ngModel)]="form.creditDaysText"
            (ionBlur)="saveSettings()"
          ></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Usar regla especial de febrero</ion-label>
          <ion-toggle
            [(ngModel)]="form.useFebruaryOverride"
            (ionChange)="saveSettings()"
          ></ion-toggle>
        </ion-item>

        <ion-item
          [disabled]="!form.useFebruaryOverride"
          [class.pn-disabled-row]="!form.useFebruaryOverride"
        >
          <ion-label position="stacked">Día de febrero</ion-label>
          <ion-input
            type="number"
            step="1"
            [(ngModel)]="form.februaryDayOverride"
            (ionBlur)="saveSettings()"
          ></ion-input>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <div class="ion-padding">
    <ion-button expand="block" (click)="recalculate()">
      Recalcular abonos
    </ion-button>
    <div class="pn-hint">
      Aplica abonos pendientes según la configuración actual.
    </div>
  </div>
</ion-content>